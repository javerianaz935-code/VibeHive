<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VibeHive | About Us</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>

    <header class="header-vibe">
        <div class="container d-flex justify-content-between align-items-center">
            <div class="logo-area h4 mb-0">
                <img src="images/logo.png" alt="VibeHive Logo"  style="height:50px; width:auto; object-fit:contain;"> 
            </div>
            <!-- this code is for nav bar categories show on product drop down -->
            <nav class="d-none d-md-flex align-items-center">
                <a class="nav-link text-white mx-2" href="index.html">Home</a>

                <!-- PRODUCT DROPDOWN -->
                <div class="nav-item dropdown mx-2">
                    <a class="nav-link dropdown-toggle text-white" href="#" id="productDropdown" role="button"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Products
                    </a>

                    <div class="dropdown-menu p-3" id="navbar-category-list"
                        style="min-width: 260px; max-height: 400px; overflow-y: auto;">
                        <!-- Categories load here -->
                        <span class="text-muted small">Loading...</span>
                    </div>
                </div>

                <a class="nav-link text-white mx-2" href="about.html">About</a>
                <a class="nav-link text-white mx-2" href="contact.html">Contact</a>
            </nav>
            <div class="d-flex align-items-center">
                <a href="wishlist.html" class="text-white mx-2"><i class="fas fa-heart"></i></a>
                <a href="checkout.html" class="text-white mx-2 cart-icon-container">
                    <i class="fas fa-shopping-cart" id="cart-icon"></i>
                    <span id="cart-badge" class="cart-badge">0</span>
                </a>
                <a href="login.html" id="profile-link" class="text-white mx-2">
                    <i class="fas fa-user-circle"></i>
                </a>

            </div>
        </div>
    </header>



    <main class="container py-5">
        <div class="card p-5">
            <h1 class="text-center text-highlight mb-5">About VibeHive</h1>

            <section class="mb-5">
                <p class="lead text-center text-primary font-weight-bold">"Welcome to VibeHive - Style your life, your
                    way."</p>
                <p class="text-muted text-center mb-4">
                    VibeHive is your one-stop destination for a diverse range of quality products that suit every mood,
                    style, and occasion.
                    At VibeHive, we believe shopping should be simple, enjoyable, and tailored to your unique vibe.
                    Whether you're looking for fashion,
                    accessories, home decor, or daily essentials, we've got something for everyone.
                </p>
                <p class="text-muted text-center">
                    Our platform is built to offer a smooth and secure shopping experience with a user-friendly design,
                    fast checkout,
                    and smart support‚Äîincluding our **AI-powered chatbot** that's always here to help.
                </p>
            </section>

            <hr class="my-4">

            <div class="row text-center">

                <div class="col-md-6 mb-4">
                    <div class="p-3">
                        <i class="fas fa-bullseye fa-3x text-highlight mb-3"></i>
                        <h3 class="text-primary h5 mb-3">Our Mission</h3>
                        <p class="text-muted small">
                            Our mission at VibeHive is to provide a wide range of high-quality, trendy, and affordable
                            products that match every customer's unique style and needs. We are committed to delivering
                            a smooth, enjoyable, and personalized shopping experience powered by smart technology and
                            excellent customer service.
                        </p>
                    </div>
                </div>

                <div class="col-md-6 mb-4">
                    <div class="p-3">
                        <i class="fas fa-eye fa-3x text-highlight mb-3"></i>
                        <h3 class="text-primary h5 mb-3">Our Vision</h3>
                        <p class="text-muted small">
                            Our vision is to become a trusted and innovative online shopping destination where people
                            can discover diverse products that inspire their lifestyle. We aim to create a digital space
                            that connects people with their vibe through convenience, variety, and value.
                        </p>
                    </div>
                </div>

            </div>

            <hr class="my-4">

            <div class="text-center mt-3">
                <h4 class="h5 text-primary">Need assistance or have a query?</h4>
                <a href="contact.html" class="btn btn-primary-vibe mt-2">
                    Contact Us
                </a>
            </div>

        </div>
    </main>

    <div id="toast-notification" class="fixed-top alert d-none"
        style="top: 80px; right: 20px; width: 300px; z-index: 1000;">
        <i class="mr-2 fas"></i> <span></span>
    </div>

    <!-- <div id="chatbot-modal" class="chatbot-modal">
    </div>
    <div id="chatbot-icon" class="chatbot-float-icon" onclick="toggleChatbot()">
        <i class="fas fa-comment-dots"></i>
    </div> -->

    <div id="chatbot-modal" class="chatbot-modal">
    <div class="chatbot-header">
        <span>AI Chatbot</span>
        <i class="fas fa-times chatbot-close" onclick="toggleChatbot()"></i>
    </div>
    <div class="chatbot-body">
        <div class="text-muted mb-2">Hello! How can I assist you?</div>
        
    </div>
    <div class="chatbot-input-area">
        <input type="text" placeholder="Type a message..." id="chatbot-input">
        <button onclick="simulateChatResponse()"><i class="fas fa-paper-plane"></i> Send</button>
    </div>
</div>

<div id="chatbot-icon" class="chatbot-float-icon" onclick="toggleChatbot()">
    <i class="fas fa-comment-dots"></i>
</div>


    <footer class="footer-vibe mt-5">
    </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="dropdown_search.js"></script>

    <script>
        // --- Global State and Working Functions (Included for self-sufficiency) ---
        // Placeholder functions for cart and chatbot must be included.

        let cartItemCount = parseInt(sessionStorage.getItem('vibeHiveCartCount')) || 0;

        document.addEventListener('DOMContentLoaded', updateCartBadge);

        function updateCartBadge() {
            const badge = document.getElementById('cart-badge');
            if (badge) {
                if (cartItemCount > 0) {
                    badge.textContent = cartItemCount;
                    badge.style.display = 'block';
                } else {
                    badge.style.display = 'none';
                }
            }
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast-notification');
            const toastText = toast.querySelector('span');
            const toastIcon = toast.querySelector('i');

            toastText.textContent = message;

            if (type === 'error') {
                toast.style.borderColor = 'red';
                toastIcon.classList.remove('fa-check-circle');
                toastIcon.classList.add('fa-exclamation-triangle');
            } else {
                toast.style.borderColor = getComputedStyle(document.documentElement).getPropertyValue('--color-accent');
                toastIcon.classList.remove('fa-exclamation-triangle');
                toastIcon.classList.add('fa-check-circle');
            }

            toast.classList.remove('d-none');
            setTimeout(() => {
                toast.classList.add('d-none');
            }, 3000);
        }

        function toggleChatbot() {
            const modal = document.getElementById('chatbot-modal');
            modal.style.display = modal.style.display === 'flex' ? 'none' : 'flex';
        }

        function simulateChatResponse() {
            const input = document.getElementById('chatbot-input');
            const body = document.querySelector('.chatbot-body');
            const userMessage = input.value.trim();

            if (userMessage === '') return;

            body.innerHTML += `<div class="text-right mb-2" style="color: ${getComputedStyle(document.documentElement).getPropertyValue('--color-primary')}">You: ${userMessage}</div>`;

            const botResponse = "Query acknowledged. I am ready for general support questions or guiding you through the site!";

            setTimeout(() => {
                body.innerHTML += `<div class="text-left mb-2 text-muted">Bot: ${botResponse}</div>`;
                body.scrollTop = body.scrollHeight;
            }, 500);

            input.value = '';
            body.scrollTop = body.scrollHeight;
        }

        document.getElementById('chatbot-input').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                simulateChatResponse();
            }
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const profileLink = document.getElementById('profile-link');
            const loggedInCustomer = JSON.parse(localStorage.getItem('loggedInCustomer'));

            // üß≠ If customer logged in ‚Üí profile page; otherwise ‚Üí login
            if (loggedInCustomer) {
                profileLink.setAttribute('href', 'customer_profile.html');
            } else {
                profileLink.setAttribute('href', 'login.html');
            }
        });
    </script>

    <script>
        async function sendMessageToChatbot(message) {
            const loggedInCustomer = JSON.parse(localStorage.getItem("loggedInCustomer"));
            const customerId = loggedInCustomer ? loggedInCustomer.id : null;

            const response = await fetch("http://127.0.0.1:5000/chat", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ message: userMessage, customer_id: customerId })
            });
        }

        async function simulateChatResponse() {
            const input = document.getElementById('chatbot-input');
            const userMessage = input.value.trim();
            if (!userMessage) return;

            const chatbotBody = document.querySelector('.chatbot-body');

            // --- User message ---
            const userDiv = document.createElement('div');
            userDiv.classList.add('user-message');
            userDiv.textContent = userMessage;
            chatbotBody.appendChild(userDiv);

            input.value = "";

            // --- Bot typing indicator ---
            const loadingDiv = document.createElement('div');
            loadingDiv.classList.add('bot-message');
            loadingDiv.textContent = "Typing...";
            chatbotBody.appendChild(loadingDiv);
            chatbotBody.scrollTop = chatbotBody.scrollHeight;

            try {
                // ‚úÖ Send message to Flask (with or without customer_id)
                const loggedInCustomer = JSON.parse(localStorage.getItem("loggedInCustomer"));
                const customerId = loggedInCustomer ? loggedInCustomer.id : null;

                const response = await fetch("http://127.0.0.1:5000/chat", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        message: userMessage,
                        customer_id: customerId
                    })
                });

                const data = await response.json();

                // --- Replace loading text with chatbot reply ---
                loadingDiv.innerHTML = data.reply;  // ‚úÖ innerHTML to render links properly
            } catch (error) {
                loadingDiv.textContent = "‚ö†Ô∏è Sorry, I couldn‚Äôt connect to the server.";
                console.error("Chatbot error:", error);
            }

            chatbotBody.scrollTop = chatbotBody.scrollHeight;
        }

    </script>

</body>

</html>