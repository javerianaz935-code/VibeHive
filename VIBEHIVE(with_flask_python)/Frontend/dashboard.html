<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VibeHive | My Account Dashboard</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="dashboard.css"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* DASHBOARD SPECIFIC STYLES (REQUIRED FOR SIDEBAR LOOK) */
        .dashboard-sidebar {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        .dashboard-link {
            display: block;
            padding: 10px 0;
            color: var(--color-text);
            font-weight: 500;
            border-bottom: 1px solid #eee;
            transition: color 0.3s;
        }
        .dashboard-link:hover, .dashboard-link.active {
            color: var(--color-primary);
            text-decoration: none;
            font-weight: 700;
        }
    </style>
</head>
<body>

    <header class="header-vibe">
        <div class="container d-flex justify-content-between align-items-center">
            <div class="logo-area h4 mb-0">
                <img src="images/logo.png" alt="VibeHive Logo"  style="height:50px; width:auto; object-fit:contain;"> 
            </div>
            <nav class="d-none d-md-flex align-items-center">
                <a class="nav-link text-white mx-2" href="index.html">Home</a>
                <a class="nav-link text-white mx-2" href="product.html">Product</a>
                <a class="nav-link text-white mx-2" href="about.html">About</a>
                <a class="nav-link text-white mx-2" href="contact.html">Contact</a>
            </nav>
            <div class="d-flex align-items-center">
                <a href="#" class="text-white mx-2"><i class="fas fa-heart"></i></a>
                <a href="checkout.html" class="text-white mx-2 cart-icon-container">
                    <i class="fas fa-shopping-cart" id="cart-icon"></i>
                    <span id="cart-badge" class="cart-badge">0</span>
                </a>
                <a href="dashboard.html" class="text-white mx-2"><i class="fas fa-user-circle"></i></a>
            </div>
        </div>
    </header>

    <main class="container py-5">
        <h1 class="mb-4 text-center">My Account Dashboard</h1>
        
        <div class="row">
            
            <div class="col-lg-3 mb-4">
                <div class="dashboard-sidebar">
                    <p class="h6 text-highlight mb-3">Welcome, Salma!</p>
                    <a href="#" class="dashboard-link active"><i class="fas fa-user mr-2"></i> Profile Details</a>
                    <a href="#" class="dashboard-link" onclick="loadDashboardSection('orders', event)"><i class="fas fa-box-open mr-2"></i> My Orders</a>
                    <a href="#" class="dashboard-link" onclick="loadDashboardSection('wishlist', event)"><i class="fas fa-heart mr-2"></i> My Wishlist</a>
                    <a href="login.html" class="dashboard-link mt-3 text-danger"><i class="fas fa-sign-out-alt mr-2"></i> Logout</a>
                </div>
            </div>

            <div class="col-lg-9">
                <div class="card p-4" id="dashboard-content">
                    <h2 class="h4 text-primary mb-4">Profile Details</h2>
                    
                    <form id="profile-form" onsubmit="simulateProfileUpdate(event)">
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Name:</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" value="Salma" required>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Email:</label>
                            <div class="col-sm-9">
                                <input type="email" class="form-control" value="salma@example.com" required>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Phone:</label>
                            <div class="col-sm-9">
                                <input type="tel" class="form-control" value="+92 3XX-XXXXXXX" required>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Address:</label>
                            <div class="col-sm-9">
                                <textarea class="form-control">Bahawalnagar, Pakistan</textarea>
                            </div>
                        </div>
                        
                        <div class="text-right">
                            <button type="submit" class="btn btn-primary-vibe mt-3" style="background-color: var(--color-primary); color: white;">
                                Save Changes
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            
        </div>
    </main>

    <div id="toast-notification" class="fixed-top alert d-none" style="top: 80px; right: 20px; width: 300px; z-index: 1000;">
        <i class="mr-2 fas"></i> <span></span>
    </div>

    <div id="chatbot-modal" class="chatbot-modal d-flex">
        <div class="chatbot-header">
            <span>AI Chatbot</span>
            <i class="fas fa-times chatbot-close" onclick="toggleChatbot()"></i> 
        </div>
        <div class="chatbot-body">
            </div>
        <div class="chatbot-input-area">
            <input type="text" placeholder="Type a message..." id="chatbot-input">
            <button onclick="simulateChatResponse()"><i class="fas fa-paper-plane"></i> Send</button>
        </div>
    </div>
    <div id="chatbot-icon" class="chatbot-float-icon" onclick="toggleChatbot()">
        <i class="fas fa-comment-dots"></i>
    </div>
    
    <footer class="footer-vibe mt-5">
        </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // --- Global State and Working Functions (Included for self-sufficiency) ---
        
        let cartItemCount = parseInt(sessionStorage.getItem('vibeHiveCartCount')) || 0;
        
        document.addEventListener('DOMContentLoaded', updateCartBadge);

        function updateCartBadge() {
            const badge = document.getElementById('cart-badge');
            if (badge) { 
                if (cartItemCount > 0) {
                    badge.textContent = cartItemCount;
                    badge.style.display = 'block';
                } else {
                    badge.style.display = 'none';
                }
            }
        }
        
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast-notification');
            const toastText = toast.querySelector('span');
            const toastIcon = toast.querySelector('i');
            
            toastText.textContent = message;
            
            if (type === 'error') {
                toast.style.borderColor = 'red';
                toastIcon.classList.remove('fa-check-circle');
                toastIcon.classList.add('fa-exclamation-triangle');
            } else {
                toast.style.borderColor = getComputedStyle(document.documentElement).getPropertyValue('--color-accent');
                toastIcon.classList.remove('fa-exclamation-triangle');
                toastIcon.classList.add('fa-check-circle');
            }

            toast.classList.remove('d-none');
            setTimeout(() => {
                toast.classList.add('d-none');
            }, 3000);
        }

        // --- Dashboard Specific Functions ---

        function simulateProfileUpdate(event) {
            event.preventDefault();
            // In the PHP phase, this would perform database validation and update.
            showToast("Profile details updated successfully!", "success");
        }

        function loadDashboardSection(section, event) {
            if (event) event.preventDefault();
            const contentDiv = document.getElementById('dashboard-content');
            const links = document.querySelectorAll('.dashboard-link');
            
            // Highlight active link
            links.forEach(link => link.classList.remove('active'));
            if (event && event.target.tagName === 'A') event.target.classList.add('active');
            
            // Ensure the clicked link is highlighted even if it's the <i> inside the <a>
            if (event && event.target.closest('a')) event.target.closest('a').classList.add('active');


            let newContent = '';
            
            if (section === 'orders') {
                // Simulating My Orders content (Use Case: View Orders, Data: Orders Table)
                newContent = `
                    <h2 class="h4 text-primary mb-4">My Orders</h2>
                    <p class="text-muted">Here is a history of your purchases. Click on an ID to track.</p>
                    <table class="table table-striped">
                        <thead style="background-color: var(--color-background);">
                            <tr>
                                <th>Order ID</th>
                                <th>Date</th>
                                <th>Total</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><a href="#" class="text-highlight">VH-2025-00103</a></td>
                                <td>2025-10-26</td>
                                <td>$265.00</td>
                                <td><span class="badge badge-warning" style="background-color: var(--color-highlight); color: var(--color-primary);">Processing</span></td>
                            </tr>
                            <tr>
                                <td><a href="#" class="text-highlight">VH-2025-00088</a></td>
                                <td>2025-09-15</td>
                                <td>$95.00</td>
                                <td><span class="badge badge-success" style="background-color: var(--color-primary); color: white;">Delivered</span></td>
                            </tr>
                        </tbody>
                    </table>
                `;
            } else if (section === 'wishlist') {
                // Simulating My Wishlist content (Data: Wishlist Table)
                newContent = `
                    <h2 class="h4 text-primary mb-4">My Wishlist</h2>
                    <p class="text-muted">Items you've saved for later.</p>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="card p-3 d-flex flex-row align-items-center">
                                <img src="assets/images/product-main.jpg" style="width: 60px; height: 60px; object-fit: cover; margin-right: 15px;" class="rounded">
                                <div>
                                    <h6 class="mb-0">Emerald Dress</h6>
                                    <p class="mb-0 small text-highlight">$129.99</p>
                                </div>
                                <a href="#" class="btn btn-link ml-auto text-danger"><i class="fas fa-trash"></i></a>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="card p-3 d-flex flex-row align-items-center">
                                <img src="assets/images/product-2.jpg" style="width: 60px; height: 60px; object-fit: cover; margin-right: 15px;" class="rounded">
                                <div>
                                    <h6 class="mb-0">Gold Loafers</h6>
                                    <p class="mb-0 small text-highlight">$85.00</p>
                                </div>
                                <a href="#" class="btn btn-link ml-auto text-danger"><i class="fas fa-trash"></i></a>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                // Default view: Profile
                newContent = `
                    <h2 class="h4 text-primary mb-4">Profile Details</h2>
                    <form id="profile-form" onsubmit="simulateProfileUpdate(event)">
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Name:</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" value="Salma" required>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Email:</label>
                            <div class="col-sm-9">
                                <input type="email" class="form-control" value="salma@example.com" required>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Phone:</label>
                            <div class="col-sm-9">
                                <input type="tel" class="form-control" value="+92 3XX-XXXXXXX" required>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Address:</label>
                            <div class="col-sm-9">
                                <textarea class="form-control">Bahawalnagar, Pakistan</textarea>
                            </div>
                        </div>
                        
                        <div class="text-right">
                            <button type="submit" class="btn btn-primary-vibe mt-3" style="background-color: var(--color-primary); color: white;">
                                Save Changes
                            </button>
                        </div>
                    </form>
                `;
            }
            
            contentDiv.innerHTML = newContent;
        }


        // --- Chatbot Functions ---
        function toggleChatbot() {
            const modal = document.getElementById('chatbot-modal');
            modal.style.display = modal.style.display === 'flex' ? 'none' : 'flex';
        }
        
        function simulateChatResponse() {
            const input = document.getElementById('chatbot-input');
            const body = document.querySelector('.chatbot-body');
            const userMessage = input.value.trim();

            if (userMessage === '') return;
            
            body.innerHTML += `<div class="text-right mb-2" style="color: ${getComputedStyle(document.documentElement).getPropertyValue('--color-primary')}">You: ${userMessage}</div>`;

            const botResponse = "Query acknowledged. I am ready for general support questions or guiding you through the site!";
            
            setTimeout(() => {
                body.innerHTML += `<div class="text-left mb-2 text-muted">Bot: ${botResponse}</div>`;
                body.scrollTop = body.scrollHeight;
            }, 500);

            input.value = '';
            body.scrollTop = body.scrollHeight;
        }

        document.getElementById('chatbot-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                simulateChatResponse();
            }
        });
        // --- End Working Functions ---
    </script>
</body>
</html>