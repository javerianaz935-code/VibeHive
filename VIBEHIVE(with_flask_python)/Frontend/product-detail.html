<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VibeHive | Product Details</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="product.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>-

    <!-- HEADER -->
    <header class="header-vibe">
        <div class="container d-flex justify-content-between align-items-center">

            <div class="logo-area h4 mb-0">
                <img src="images/logo.png" alt="VibeHive Logo" style="height:50px; width:auto; object-fit:contain;">
            </div>

            <nav class="d-none d-md-flex align-items-center">
                <a class="nav-link text-white mx-2" href="index.html">Home</a>
                <div class="nav-item dropdown mx-2">
                    <a class="nav-link dropdown-toggle text-white" href="#" id="productDropdown" data-toggle="dropdown">
                        Products
                    </a>

                    <div class="dropdown-menu p-3" id="navbar-category-list"
                        style="min-width:260px; max-height:400px; overflow-y:auto;">
                        <span class="text-muted small">Loading...</span>
                    </div>
                </div>
                <a class="nav-link text-white mx-2" href="about.html">About</a>
                <a class="nav-link text-white mx-2" href="contact.html">Contact</a>
            </nav>

            <div class="d-flex align-items-center">



                <div class="search-box mx-3 d-flex align-items-center position-relative">
                    <input type="text" id="productSearch" placeholder="Search products..." autocomplete="off"
                        class="form-control form-control-sm">

                    <div id="searchResults" class="position-absolute bg-white shadow p-3"
                        style="top:45px; width:320px; display:none; z-index:999;">
                    </div>

                    <button class="btn btn-sm btn-link">
                        <i class="fas fa-search"></i>
                    </button>
                </div>

                <a href="wishlist.html" class="text-white mx-2"><i class="fas fa-heart"></i></a>

                <a href="checkout.html" class="text-white mx-2 cart-icon-container">
                    <i class="fas fa-shopping-cart" id="cart-icon"></i>
                    <span id="cart-badge" class="cart-badge">0</span>
                </a>

                <!-- <a href="login.html" class="text-white mx-2"><i class="fas fa-user-circle"></i></a> -->
                <a id="profile-link" href="login.html" class="text-white mx-2">
                    <i class="fas fa-user-circle"></i>
                </a>

            </div>

        </div>
    </header>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const profileLink = document.getElementById('profile-link');
            const loggedInCustomer = JSON.parse(localStorage.getItem('loggedInCustomer'));

            // ðŸ§­ If customer logged in â†’ profile page; otherwise â†’ login
            if (loggedInCustomer) {
                profileLink.setAttribute('href', 'customer_profile.html');
            } else {
                profileLink.setAttribute('href', 'login.html');
            }
        });
    </script>

    <!-- PRODUCT DETAIL SECTION -->
    <main class="container py-5">

        

        <div class="row" id="product-detail-container">

            <!-- Product Image -->
            <div class="col-md-5 mb-4">
                <div class="border rounded p-3">
                    <img id="detail-image" src="assets/images/default.jpg" class="img-fluid rounded"
                        alt="Product Image">
                </div>
            </div>

            <!-- Product Text Content -->
            <div class="col-md-7">
                <h1 id="detail-name">Product Name</h1>
                <p class="text-muted" id="detail-category">Category</p>

                <h3 class="text-highlight mt-3">Rs. <span id="detail-price">0</span></h3>

                <button id="wishlist-btn" class="btn btn-outline-danger mt-3">
                    <i class="far fa-heart"></i> Add to Wishlist
                </button>

                <p class="mt-4" id="detail-description">
                    Full product description will appear here...
                </p>

                <p id="detail-availability" class="mt-2 font-weight-bold"></p>


                <div class="mt-4 d-flex align-items-center">
                    <label class="mr-2 font-weight-bold">Quantity:</label>
                    <input type="number" id="detail-quantity" class="form-control" style="width: 100px;" min="1"
                        value="1">
                </div>

                <button id="add-to-cart-btn" class="btn btn-primary-vibe mt-4">
                    <i class="fas fa-cart-plus"></i> Add to Cart
                </button>

            </div>

        </div>

        <hr class="mt-5">

        <h4>Request Price Drop Alert</h4>

        <div class="border p-3 rounded mt-3">
            <div class="form-group">
                <label>Your Email</label>
                <input type="email" id="alert-email" class="form-control" placeholder="Enter your email">
            </div>

            <div class="form-group mt-3">
                <label>Your Desired Price</label>
                <input type="number" id="alert-demand-price" class="form-control" placeholder="Enter expected price">
            </div>

            <button class="btn btn-primary-vibe mt-3" onclick="submitPriceAlert()">
                Notify Me When Price Drops
            </button>
        </div>


    </main>

    <!-- TOAST -->
    <div id="toast-notification" class="fixed-top alert d-none"
        style="top: 80px; right: 20px; width: 300px; z-index: 1000;">
        <i class="mr-2 fas"></i> <span></span>
    </div>

    <!-- CHATBOT MODAL -->
    <div id="chatbot-modal" class="chatbot-modal">
        <div class="chatbot-header">
            <span>AI Chatbot</span>
            <i class="fas fa-times chatbot-close" onclick="toggleChatbot()"></i>
        </div>
        <div class="chatbot-body">
            <div class="text-muted mb-2">Hello! How can I assist you?</div>
        </div>
        <div class="chatbot-input-area">
            <input type="text" placeholder="Type a message..." id="chatbot-input">
            <button onclick="simulateChatResponse()"><i class="fas fa-paper-plane"></i> Send</button>
        </div>
    </div>

    <!-- CHATBOT FLOAT ICON -->
    <div id="chatbot-icon" class="chatbot-float-icon" onclick="toggleChatbot()">
        <i class="fas fa-comment-dots"></i>
    </div>

    <!-- FOOTER -->
    <footer class="footer-vibe mt-5">
        <div class="container py-4"></div>
    </footer>

    <!-- JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>

    <script src="product-detail.js"></script>
    <script src="dropdown_search.js"></script>
    <script src="product.js"></script>

</body>

</html>